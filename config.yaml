llm:
  # Doubao 配置 (OpenAI 兼容)
  provider: "openai"  # 使用 OpenAI 兼容 API
  base_url: "https://nexusapi.cn/v1"
  # 不要在仓库中硬编码密钥；请通过环境变量（如 ALLAPI_KEY / OPENAI_API_KEY）注入
  api_key: ""
  
  # 模型配置
  models:
    # 默认模型 - Doubao Seed
    default: "doubao-seed-1-6-250615"
    # 视觉模型 - 处理图片
    vision: "doubao-seed-1-6-vision-250815"
    # 思考模型 - 同样使用默认模型
    thinking: "doubao-seed-1-6-250615"
  
  # 思考模式开关 (true使用thinking模型, false使用default模型)
  thinking_mode: false
  
  # 生成参数
  temperature: 0.7
  max_tokens: 8192

agents:
  # Planner Agent配置
  planner:
    enabled: true
    max_iterations: 5
    timeout: 60
    # 使用思考模型进行规划
    use_thinking: true
    temperature: 0.5

  # Executor Agent配置
  executor:
    enabled: true
    max_iterations: 10
    timeout: 300
    # 使用默认模型执行
    use_thinking: false
    temperature: 0.7

  # Verifier Agent配置
  verifier:
    enabled: true
    threshold: 0.8
    # 使用思考模型验证
    use_thinking: true
    temperature: 0.3

execution:
  # 代码执行环境
  sandbox:
    type: "docker"  # docker | local
    timeout: 60
    memory_limit: "512MB"
    cpu_limit: "1.0"

  # Docker配置
  docker:
    image: "python:3.11-slim"
    network_disabled: true

tools:
  # 启用的工具列表
  enabled:
    - calculator
    - text_processor
    - web_search
    - file_operations
    - code_execution
    - web_scraper
    - http_client
    - database
    - shell

  # 工具特定配置
  web_search:
    provider: "tavily"
    api_key: "${TAVILY_API_KEY}"
    max_results: 10

  file_operations:
    max_file_size: "10MB"
    allowed_extensions:
      - ".txt"
      - ".json"
      - ".csv"
      - ".md"
      - ".py"

context:
  # 上下文管理
  max_length: 8000
  compression_threshold: 6000
  cache_enabled: true

memory:
  # 记忆系统
  enabled: true
  type: "sqlite"  # redis | sqlite
  ttl: 3600
  storage_path: "data/memory"

cache:
  # 缓存配置
  enabled: true
  max_size: 1000
  default_ttl: 3600

database:
  # 数据库配置
  url: "${DATABASE_URL}"
  pool_size: 5
  max_overflow: 10

redis:
  # Redis配置 (可选)
  url: "${REDIS_URL}"
  max_connections: 10

logging:
  # 日志配置
  level: "${LOG_LEVEL}"
  format: "json"
  output: "stdout"
  file:
    enabled: true
    path: "logs/manus.log"
    rotation: "1 day"
    retention: "7 days"

monitoring:
  # 监控配置
  enabled: true
  metrics:
    - task_success_rate
    - avg_execution_time
    - tool_usage_count
    - error_rate
    - context_length
    - token_usage
    - cost_tracking

security:
  # 安全配置
  rate_limit:
    enabled: true
    max_requests: 100
    window: 60

  code_execution:
    max_execution_time: 60
    network_access: false
    file_system_access: "restricted"

development:
  # 开发配置
  debug: false
  reload: true

production:
  # 生产配置
  workers: 4
  host: "0.0.0.0"
  port: 8000
